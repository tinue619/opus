<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Adaptive Dividers</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #f5f5f5;
    }
    .test-info {
      position: fixed;
      top: 20px;
      left: 20px;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      z-index: 1000;
      max-width: 400px;
    }
    .test-info h3 {
      margin-top: 0;
    }
    .test-steps {
      list-style: none;
      padding: 0;
    }
    .test-steps li {
      margin: 10px 0;
      padding: 10px;
      background: #f0f0f0;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .test-steps li:hover {
      background: #e0e0e0;
    }
    .test-steps li.done {
      background: #d4edda;
      color: #155724;
    }
  </style>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="test-info">
    <h3>üß™ –¢–µ—Å—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π</h3>
    <p>–°–ª–µ–¥—É–π—Ç–µ —à–∞–≥–∞–º –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:</p>
    <ol class="test-steps" id="testSteps">
      <li onclick="step1()">1. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ (2 —Å—Ç–æ–π–∫–∏ + 3 –ø–æ–ª–∫–∏)</li>
      <li onclick="step2()">2. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –ø–æ–ª–µ "–®–∏—Ä–∏–Ω–∞" –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ä–µ–∂–∏–º–∞</li>
      <li onclick="step3()">3. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å –ª–µ–≤—É—é —Å—Ç–µ–Ω–∫—É –≤–ª–µ–≤–æ (—É–≤–µ–ª–∏—á–∏—Ç—å —à–∏—Ä–∏–Ω—É)</li>
      <li onclick="step4()">4. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å –ø—Ä–∞–≤—É—é —Å—Ç–µ–Ω–∫—É –≤–ª–µ–≤–æ (—É–º–µ–Ω—å—à–∏—Ç—å —à–∏—Ä–∏–Ω—É)</li>
      <li onclick="step5()">5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å</li>
    </ol>
    <p id="status" style="margin-top: 20px; font-weight: bold;"></p>
  </div>
  
  <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
  <div class="app-container">
    <div class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <div class="logo-icon">
            <svg fill="none" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" />
            </svg>
          </div>
          <div class="logo-text">
            <h1>Cabinet Designer</h1>
            <p>–¢–µ—Å—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π</p>
          </div>
        </div>
      </div>
      
      <div class="sidebar-content">
        <div class="control-group">
          <label class="control-label">–®–∏—Ä–∏–Ω–∞</label>
          <div class="input-wrapper">
            <input type="number" id="width" class="input-field" value="800" min="132" max="2000">
            <span class="input-unit">–º–º</span>
          </div>
        </div>
        
        <div class="control-group">
          <label class="control-label">–í—ã—Å–æ—Ç–∞</label>
          <div class="input-wrapper">
            <input type="number" id="height" class="input-field" value="1800" min="132" max="3000">
            <span class="input-unit">–º–º</span>
          </div>
        </div>
        
        <div class="control-group">
          <label class="control-label">–ì–ª—É–±–∏–Ω–∞</label>
          <div class="input-wrapper">
            <input type="number" id="depth" class="input-field" value="500" min="100" max="1000">
            <span class="input-unit">–º–º</span>
          </div>
        </div>
        
        <div class="control-group">
          <label class="control-label">–¶–æ–∫–æ–ª—å</label>
          <div class="input-wrapper">
            <input type="number" id="base" class="input-field" value="100" min="60" max="200">
            <span class="input-unit">–º–º</span>
          </div>
        </div>
        
        <div class="button-group">
          <button id="apply" class="btn btn-primary">
            <svg fill="none" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
            </svg>
            –ü—Ä–∏–º–µ–Ω–∏—Ç—å
          </button>
        </div>
        
        <div class="parts-section">
          <div class="parts-header">
            <h3>–î–µ—Ç–∞–ª–∏</h3>
            <span class="parts-count" id="partsCount">0</span>
          </div>
          <div class="parts-list" id="partsList"></div>
        </div>
      </div>
    </div>
    
    <div class="main-content">
      <div class="toolbar">
        <button id="toggleDimensions" class="toolbar-btn">
          <svg fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="m7.49 12-3.75 3.75m0 0 3.75 3.75m-3.75-3.75h16.5m0-7.5-3.75-3.75m3.75 3.75-3.75 3.75m3.75-3.75H3.74" />
          </svg>
          –†–∞–∑–º–µ—Ä—ã
        </button>
      </div>
      
      <div class="canvas-container cabinet-colors">
        <canvas id="canvas"></canvas>
      </div>
    </div>
  </div>
  
  <div id="notification" class="notification">
    <svg class="notification-icon" fill="none" viewBox="0 0 24 24" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
    </svg>
    <span class="notification-text"></span>
  </div>

  <script src="js/config.js"></script>
  <script src="js/historyManager.js"></script>
  <script src="js/cabinet.js"></script>
  <script src="js/resizeHandler.js"></script>
  <script src="js/renderer.js"></script>
  <script src="js/events.js"></script>
  <script src="js/app.js"></script>
  
  <script>
    let currentStep = 0;
    
    function markStepDone(step) {
      document.querySelectorAll('.test-steps li')[step - 1].classList.add('done');
    }
    
    function updateStatus(message, color = 'black') {
      document.getElementById('status').textContent = message;
      document.getElementById('status').style.color = color;
    }
    
    function step1() {
      // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏
      if (app.cabinet) {
        saveHistory();
        
        // –î–æ–±–∞–≤–ª—è–µ–º 2 –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç–æ–π–∫–∏
        app.cabinet.addDivider('v', 250, 0, app.cabinet.interiorHeight);
        app.cabinet.addDivider('v', 500, 0, app.cabinet.interiorHeight);
        
        // –î–æ–±–∞–≤–ª—è–µ–º 3 –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ–∫—Ü–∏—è—Ö
        app.cabinet.addDivider('h', 400, 0, 250);
        app.cabinet.addDivider('h', 800, 250, 500);
        app.cabinet.addDivider('h', 1200, 500, app.cabinet.interiorWidth);
        
        saveHistory();
        render();
        updatePartsList();
        
        markStepDone(1);
        updateStatus('‚úì –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã. –¢–µ–ø–µ—Ä—å –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ø–æ–ª–µ "–®–∏—Ä–∏–Ω–∞"', 'green');
        currentStep = 1;
      }
    }
    
    function step2() {
      if (currentStep < 1) {
        updateStatus('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —à–∞–≥ 1', 'orange');
        return;
      }
      
      // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø–æ–ª–µ —à–∏—Ä–∏–Ω—ã
      document.getElementById('width').focus();
      
      markStepDone(2);
      updateStatus('‚úì –†–µ–∂–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —à–∏—Ä–∏–Ω—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –ª–µ–≤—É—é —Å—Ç–µ–Ω–∫—É', 'green');
      currentStep = 2;
    }
    
    function step3() {
      if (currentStep < 2) {
        updateStatus('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —à–∞–≥–∏', 'orange');
        return;
      }
      
      markStepDone(3);
      updateStatus('–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –ª–µ–≤—É—é —Å—Ç–µ–Ω–∫—É –≤–ª–µ–≤–æ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —à–∏—Ä–∏–Ω—ã', 'blue');
      currentStep = 3;
    }
    
    function step4() {
      if (currentStep < 3) {
        updateStatus('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —à–∞–≥–∏', 'orange');
        return;
      }
      
      markStepDone(4);
      updateStatus('–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –ø—Ä–∞–≤—É—é —Å—Ç–µ–Ω–∫—É –≤–ª–µ–≤–æ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —à–∏—Ä–∏–Ω—ã', 'blue');
      currentStep = 4;
    }
    
    function step5() {
      markStepDone(5);
      updateStatus('‚úÖ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω! –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –∫ –Ω–æ–≤—ã–º —Ä–∞–∑–º–µ—Ä–∞–º', 'green');
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏
      if (!app.showDimensions) {
        document.getElementById('toggleDimensions').click();
      }
    }
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        updateStatus('–ù–∞—á–Ω–∏—Ç–µ —Å —à–∞–≥–∞ 1 - –¥–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏', 'blue');
      }, 500);
    });
  </script>
</body>
</html>
