<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cabinet Designer - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #f5f5f5;
    }
    .demo-container {
      max-width: 1200px;
      margin: 20px auto;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .demo-title {
      text-align: center;
      color: #333;
      margin-bottom: 30px;
    }
    .demo-info {
      background: #e8f4fd;
      padding: 20px;
      border-radius: 6px;
      margin-bottom: 20px;
      border-left: 4px solid #007AFF;
    }
    .feature-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .feature-list li {
      margin: 10px 0;
      padding-left: 30px;
      position: relative;
    }
    .feature-list li:before {
      content: "‚úì";
      position: absolute;
      left: 0;
      color: #28a745;
      font-weight: bold;
      font-size: 20px;
    }
    .test-controls {
      display: flex;
      gap: 10px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    .test-btn {
      padding: 10px 20px;
      background: #007AFF;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s;
    }
    .test-btn:hover {
      background: #0056b3;
    }
    .test-btn.danger {
      background: #dc3545;
    }
    .test-btn.danger:hover {
      background: #c82333;
    }
    .test-btn.success {
      background: #28a745;
    }
    .test-btn.success:hover {
      background: #218838;
    }
    .status-message {
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
      display: none;
    }
    .status-message.show {
      display: block;
    }
    .status-message.info {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }
    .status-message.warning {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeaa7;
    }
    .status-message.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .highlight {
      background: yellow;
      padding: 2px 4px;
      border-radius: 2px;
    }
  </style>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="demo-container">
    <h1 class="demo-title">üéØ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π</h1>
    
    <div class="demo-info">
      <h3>‚ú® –ù–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤:</h3>
      <ul class="feature-list">
        <li>–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ <span class="highlight">–ù–ï —É–¥–∞–ª—è—é—Ç—Å—è</span> –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤</li>
        <li>–†–∞–∑–º–µ—Ä –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –∑–∞ —Å—á–µ—Ç <span class="highlight">–∫—Ä–∞–π–Ω–∏—Ö —Å–µ–∫—Ü–∏–π</span></li>
        <li>–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ <span class="highlight">–∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è</span> –∫ –Ω–æ–≤—ã–º —Ä–∞–∑–º–µ—Ä–∞–º</li>
        <li>–°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —Å–µ–∫—Ü–∏–π (100 –º–º)</li>
        <li>–ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ <span class="highlight">—Å–¥–≤–∏–≥–∞—é—Ç—Å—è</span> –∏–ª–∏ —É–¥–∞–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ</li>
      </ul>
    </div>
    
    <div class="test-controls">
      <button class="test-btn" onclick="addTestDividers()">–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏</button>
      <button class="test-btn" onclick="testWidthReduction()">–£–º–µ–Ω—å—à–∏—Ç—å —à–∏—Ä–∏–Ω—É</button>
      <button class="test-btn" onclick="testWidthIncrease()">–£–≤–µ–ª–∏—á–∏—Ç—å —à–∏—Ä–∏–Ω—É</button>
      <button class="test-btn" onclick="testHeightReduction()">–£–º–µ–Ω—å—à–∏—Ç—å –≤—ã—Å–æ—Ç—É</button>
      <button class="test-btn" onclick="testHeightIncrease()">–£–≤–µ–ª–∏—á–∏—Ç—å –≤—ã—Å–æ—Ç—É</button>
      <button class="test-btn danger" onclick="testExtremeReduction()">–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ</button>
      <button class="test-btn success" onclick="resetCabinet()">–°–±—Ä–æ—Å</button>
    </div>
    
    <div id="statusMessage" class="status-message"></div>
  </div>
  
  <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
  <div class="app-container">
    <div class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <div class="logo-icon">
            <svg fill="none" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" />
            </svg>
          </div>
          <div class="logo-text">
            <h1>Cabinet Designer</h1>
            <p>–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏</p>
          </div>
        </div>
      </div>
      
      <div class="sidebar-content">
        <div class="control-group">
          <label class="control-label">–®–∏—Ä–∏–Ω–∞</label>
          <div class="input-wrapper">
            <input type="number" id="width" class="input-field" value="800" min="132" max="2000">
            <span class="input-unit">–º–º</span>
          </div>
        </div>
        
        <div class="control-group">
          <label class="control-label">–í—ã—Å–æ—Ç–∞</label>
          <div class="input-wrapper">
            <input type="number" id="height" class="input-field" value="1800" min="132" max="3000">
            <span class="input-unit">–º–º</span>
          </div>
        </div>
        
        <div class="control-group">
          <label class="control-label">–ì–ª—É–±–∏–Ω–∞</label>
          <div class="input-wrapper">
            <input type="number" id="depth" class="input-field" value="500" min="100" max="1000">
            <span class="input-unit">–º–º</span>
          </div>
        </div>
        
        <div class="control-group">
          <label class="control-label">–¶–æ–∫–æ–ª—å</label>
          <div class="input-wrapper">
            <input type="number" id="base" class="input-field" value="100" min="60" max="200">
            <span class="input-unit">–º–º</span>
          </div>
        </div>
        
        <div class="button-group">
          <button id="apply" class="btn btn-primary">
            <svg fill="none" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
            </svg>
            –ü—Ä–∏–º–µ–Ω–∏—Ç—å
          </button>
        </div>
        
        <div class="parts-section">
          <div class="parts-header">
            <h3>–î–µ—Ç–∞–ª–∏</h3>
            <span class="parts-count" id="partsCount">0</span>
          </div>
          <div class="parts-list" id="partsList"></div>
        </div>
      </div>
    </div>
    
    <div class="main-content">
      <div class="toolbar">
        <button id="toggleDimensions" class="toolbar-btn">
          <svg fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="m7.49 12-3.75 3.75m0 0 3.75 3.75m-3.75-3.75h16.5m0-7.5-3.75-3.75m3.75 3.75-3.75 3.75m3.75-3.75H3.74" />
          </svg>
          –†–∞–∑–º–µ—Ä—ã
        </button>
        
        <div class="toolbar-spacer"></div>
        
        <div class="toolbar-info">
          <svg fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
          </svg>
          –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ —Å—Ç–µ–Ω–∫–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
        </div>
      </div>
      
      <div class="canvas-container cabinet-colors">
        <canvas id="canvas"></canvas>
      </div>
    </div>
  </div>
  
  <div id="notification" class="notification">
    <svg class="notification-icon" fill="none" viewBox="0 0 24 24" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
    </svg>
    <span class="notification-text"></span>
  </div>

  <script src="js/config.js"></script>
  <script src="js/historyManager.js"></script>
  <script src="js/cabinet.js"></script>
  <script src="js/resizeHandler.js"></script>
  <script src="js/renderer.js"></script>
  <script src="js/events.js"></script>
  <script src="js/app.js"></script>
  
  <script>
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
    
    function showStatus(message, type = 'info') {
      const statusEl = document.getElementById('statusMessage');
      statusEl.className = 'status-message show ' + type;
      statusEl.textContent = message;
      
      setTimeout(() => {
        statusEl.classList.remove('show');
      }, 5000);
    }
    
    function addTestDividers() {
      if (!app.cabinet) return;
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
      saveHistory();
      
      // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π
      const added = [];
      
      // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç–æ–π–∫–∏
      if (app.cabinet.addDivider('v', 250, 0, app.cabinet.interiorHeight)) {
        added.push('—Å—Ç–æ–π–∫–∞ –Ω–∞ 250–º–º');
      }
      if (app.cabinet.addDivider('v', 500, 0, app.cabinet.interiorHeight)) {
        added.push('—Å—Ç–æ–π–∫–∞ –Ω–∞ 500–º–º');
      }
      
      // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª–∫–∏
      if (app.cabinet.addDivider('h', 400, 0, 250)) {
        added.push('–ø–æ–ª–∫–∞ –Ω–∞ 400–º–º (–ª–µ–≤–∞—è —Å–µ–∫—Ü–∏—è)');
      }
      if (app.cabinet.addDivider('h', 800, 250, 500)) {
        added.push('–ø–æ–ª–∫–∞ –Ω–∞ 800–º–º (—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è)');
      }
      if (app.cabinet.addDivider('h', 1200, 500, app.cabinet.interiorWidth)) {
        added.push('–ø–æ–ª–∫–∞ –Ω–∞ 1200–º–º (–ø—Ä–∞–≤–∞—è —Å–µ–∫—Ü–∏—è)');
      }
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
      saveHistory();
      
      render();
      updatePartsList();
      
      showStatus('–î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏: ' + added.join(', '), 'success');
      showNotification('–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã', 'success');
    }
    
    function testWidthReduction() {
      const currentWidth = parseInt(document.getElementById('width').value);
      const newWidth = Math.max(400, currentWidth - 200);
      document.getElementById('width').value = newWidth;
      
      showStatus(`–£–º–µ–Ω—å—à–∞–µ–º —à–∏—Ä–∏–Ω—É —Å ${currentWidth}–º–º –¥–æ ${newWidth}–º–º. –°–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è!`, 'warning');
      
      // –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
      applyDimensions();
    }
    
    function testWidthIncrease() {
      const currentWidth = parseInt(document.getElementById('width').value);
      const newWidth = Math.min(1600, currentWidth + 200);
      document.getElementById('width').value = newWidth;
      
      showStatus(`–£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É —Å ${currentWidth}–º–º –¥–æ ${newWidth}–º–º. –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ!`, 'info');
      
      // –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
      applyDimensions();
    }
    
    function testHeightReduction() {
      const currentHeight = parseInt(document.getElementById('height').value);
      const newHeight = Math.max(1000, currentHeight - 300);
      document.getElementById('height').value = newHeight;
      
      showStatus(`–£–º–µ–Ω—å—à–∞–µ–º –≤—ã—Å–æ—Ç—É —Å ${currentHeight}–º–º –¥–æ ${newHeight}–º–º. –ü–æ–ª–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è!`, 'warning');
      
      // –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
      applyDimensions();
    }
    
    function testHeightIncrease() {
      const currentHeight = parseInt(document.getElementById('height').value);
      const newHeight = Math.min(2400, currentHeight + 300);
      document.getElementById('height').value = newHeight;
      
      showStatus(`–£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É —Å ${currentHeight}–º–º –¥–æ ${newHeight}–º–º. –ü–æ–ª–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ!`, 'info');
      
      // –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
      applyDimensions();
    }
    
    function testExtremeReduction() {
      document.getElementById('width').value = 400;
      document.getElementById('height').value = 600;
      
      showStatus('–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ! –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —Å–µ–∫—Ü–∏–π.', 'warning');
      
      // –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
      applyDimensions();
    }
    
    function resetCabinet() {
      reset();
      showStatus('–®–∫–∞—Ñ —Å–±—Ä–æ—à–µ–Ω –∫ –Ω–∞—á–∞–ª—å–Ω—ã–º —Ä–∞–∑–º–µ—Ä–∞–º', 'success');
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø–æ–∫–∞–∑–æ–º —Ä–∞–∑–º–µ—Ä–æ–≤
    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        document.getElementById('toggleDimensions').click();
        showStatus('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏", –∑–∞—Ç–µ–º –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã —à–∫–∞—Ñ–∞.', 'info');
      }, 500);
    });
  </script>
</body>
</html>
