# 🔄 Исправление зеркального отображения 3D

## 🎯 **Проблема:**
Горизонтальные элементы (полки и штанги) отображались зеркально в 3D виде - то что должно быть вверху, было внизу и наоборот.

## 🔍 **Причина:**
Разница в системах координат:
- **2D Canvas**: Y = 0 вверху, Y растет вниз ⬇️
- **3D Three.js**: Y = 0 внизу, Y растет вверх ⬆️

```
2D система (Canvas):           3D система (Three.js):
   Y=0 ┌─────────┐                Y=max ┌─────────┐
       │         │                       │         │  
       │    ⬇️    │                       │    ⬆️    │
       │         │                       │         │
   Y=max└─────────┘                Y=0   └─────────┘
```

## ✅ **Решение:**
Инвертирование Y координат для горизонтальных элементов:

```javascript
// Формула инверсии:
const invertedY = cabinet.interiorHeight - originalY;

// Применяется для:
- Полок (divider.type === 'h')
- Штанг (rod.y)
- Креплений штанг
```

## 🔧 **Что исправлено:**

### **Полки:**
```javascript
// Было:
divider.pos * scale

// Стало:
const invertedY = cabinet.interiorHeight - divider.pos;
invertedY * scale
```

### **Штанги:**
```javascript
// Было:
rod.y * scale

// Стало: 
const invertedRodY = cabinet.interiorHeight - rod.y;
invertedRodY * scale
```

### **Стойки:**
Остались без изменений - вертикальные элементы не зависят от направления Y оси.

## 🎉 **Результат:**

Теперь 3D вид **точно соответствует** 2D виду:
- ✅ Полки расположены на тех же уровнях
- ✅ Штанги висят на правильной высоте  
- ✅ Верх есть верх, низ есть низ
- ✅ Полное соответствие 2D ↔ 3D

## 📐 **Математика:**

```javascript
// 2D: элемент на Y=600 от верха
// 3D: элемент на Y=(1800-600)=1200 от низа
// При interiorHeight=1800

// В 3D позиции:
// Полка в 2D на Y=600  → 3D на invertedY=1200
// Полка в 2D на Y=1200 → 3D на invertedY=600
```

---

*Теперь 3D модель является идеальным отражением 2D чертежа! 🎯*